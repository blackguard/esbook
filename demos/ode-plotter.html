<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ode-plotter.esbook</title>
    <script defer type="module">
        const default_server_endpoint = 'https://blackguard.github.io/esbook/build/';
        const server_endpoint = new URL(location).searchParams.get('s') ?? default_server_endpoint;
        const loading_indicator_el = document.createElement('h1');
        loading_indicator_el.innerText = 'Loading...';
        document.body.insertBefore(loading_indicator_el, document.body.firstChild);
        try {
            await import(new URL('./src/init.js', server_endpoint));
        } catch (error) {
            document.body.innerHTML = '<h1>Failed to Load</h1><h2>Server endpoint: '+server_endpoint+'</h2><pre>'+error.stack+'</pre>';
        } finally {
            loading_indicator_el.remove();
        }
    </script>
</head>
<body>
<div id="initializing-data-f55c8878-87c8-11ec-b7c3-273bd5f809b1" style="display:none">
eyJuYl90eXBlIjoiZXNib29rIiwibmJfdmVyc2lvbiI6IjIuMC4wIiwiZWxlbWVudHMiOlt7ImlkIjoiaWQtYmI1MjI5ZWMtMWY3NS00NjhlLWI2NDktYjJmYmM5ODZlMTU4IiwiaW5wdXQiOiIvLyBhdXRvZXZhbCIsIm91dHB1dCI6W10sImZvcm1hdHRpbmdfb3B0aW9ucyI6eyJhbGlnbiI6ImxlZnQiLCJpbmRlbnQiOiIwZW0ifX0seyJpZCI6ImlkLTY1YWZlNmM5LTY3YWItNDY0Ni1hNWFlLWEzMGFiZmViYTdhNCIsImlucHV0IjoiVGhpcyBub3RlYm9vayB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZXZhbHVhdGVkIHdoZW4gbG9hZGVkLlxuT25jZSBldmFsdWF0aW9uIGNvbXBsZXRlcywgY2xpY2sgdGhlIEdvIGJ1dHRvbiB0byBzdGFydC5cbiQgJFxuRXF1YXRpb25zIGFuZCBwYXJhbWV0ZXJzIG1heSBiZSBtb2RpZmllZCBpbiBjb2RlIGluIHRoZSBsYXN0IGVsZW1lbnQuXG5UbyBzZWUgdGhlIGVmZmVjdCBvZiBtb2RpZmljYXRpb25zLCBldmFsdWF0ZSB0aGUgbGFzdCBlbGVtZW50LCBvclxuc2ltcGx5IHJlLWV2YWx1YXRlIHRoZSBlbnRpcmUgbm90ZWJvb2sgKGZyb20gdGhlIG1lbnU6IEVsZW1lbnQtPkV2YWwgbm90ZWJvb2spXG4iLCJvdXRwdXQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IlRoaXMgbm90ZWJvb2sgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGV2YWx1YXRlZCB3aGVuIGxvYWRlZC5cbk9uY2UgZXZhbHVhdGlvbiBjb21wbGV0ZXMsIGNsaWNrIHRoZSBHbyBidXR0b24gdG8gc3RhcnQuXG4kICRcbkVxdWF0aW9ucyBhbmQgcGFyYW1ldGVycyBtYXkgYmUgbW9kaWZpZWQgaW4gY29kZSBpbiB0aGUgbGFzdCBlbGVtZW50LlxuVG8gc2VlIHRoZSBlZmZlY3Qgb2YgbW9kaWZpY2F0aW9ucywgZXZhbHVhdGUgdGhlIGxhc3QgZWxlbWVudCwgb3JcbnNpbXBseSByZS1ldmFsdWF0ZSB0aGUgZW50aXJlIG5vdGVib29rIChmcm9tIHRoZSBtZW51OiBFbGVtZW50LT5FdmFsIG5vdGVib29rKVxuIn1dLCJmb3JtYXR0aW5nX29wdGlvbnMiOnsiYWxpZ24iOiJsZWZ0IiwiaW5kZW50IjoiMGVtIn19LHsiaWQiOiJpZC02MjU4Njg5Ni0yNmRiLTQ1NmYtYTkzMi0wMTBiNzQzNjllNzIiLCJpbnB1dCI6Ii8vIGF1dG9oaWRlXG5cbmNsYXNzIFdvcmtlclBvb2wge1xuICAgIGNvbnN0cnVjdG9yKHdvcmtlcl9jb3VudD1uYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICB3b3JrZXJfY291bnQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogd29ya2VyX2NvdW50LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fd29ya2VycyA9IFtdO1xuICAgICAgICB0aGlzLl91cGRhdGVfcG9vbCgpO1xuICAgIH1cblxuICAgIGdldCB3b3JrZXJzICgpe1xuICAgICAgICBpZiAodGhpcy5fd29ya2Vycy5zb21lKHcgPT4gdy50ZXJtaW5hdGVkKSkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlX3Bvb2woKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd29ya2VycztcbiAgICB9XG5cbiAgICBfdXBkYXRlX3Bvb2woKSB7XG4gICAgICAgIHRoaXMuX3dvcmtlcnMgPSB0aGlzLl93b3JrZXJzLmZpbHRlcih3ID0+ICF3LnRlcm1pbmF0ZWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fd29ya2Vycy5sZW5ndGg7IGkgPCB0aGlzLndvcmtlcl9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl93b3JrZXJzLnB1c2goY3JlYXRlX3dvcmtlcigpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhcnMoeyB3b3JrZXJfcG9vbDogdGhpcy5ldmFsX2NvbnRleHQud29ya2VyX3Bvb2wgPz8gbmV3IFdvcmtlclBvb2woKSB9KTsiLCJvdXRwdXQiOltdLCJmb3JtYXR0aW5nX29wdGlvbnMiOnsiYWxpZ24iOiJsZWZ0IiwiaW5kZW50IjoiMGVtIn19LHsiaWQiOiJpZC0yMjExMzdkNC00Y2MwLTQwMWUtOWQxMi04MGY3ODc4MTE0MGQiLCJpbnB1dCI6Ii8vIGF1dG9oaWRlXG5jb25zdCB7XG4gICAgUGxvdGx5LFxufSA9IGF3YWl0IGltcG9ydCgnLi9vdXRwdXQtaGFuZGxlcnMvcGxvdGx5LmpzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48c3R5bGU+XG4gICAgI29kZV9wbG90dGVyX2luZm9fZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMnJlbTtcbiAgICB9XG5cbiAgICAjb2RlX3Bsb3R0ZXJfcGxheV9jb250cm9scyB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAwLjVyZW07XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAwLjVyZW07XG4gICAgfVxuXG4gICAgI29kZV9wbG90dGVyX2NvbnRyb2xzIHtcbiAgICAgICAgd2lkdGg6IGZpdC1jb250ZW50O1xuICAgIH1cbiAgICAjb2RlX3Bsb3R0ZXJfY29udHJvbHMgZGl2ICoge1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIH1cblxuICAgICNvZGVfcGxvdHRlcl9hZGp1c3RtZW50cyB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogbWF4LWNvbnRlbnQgbWF4LWNvbnRlbnQ7XG4gICAgICAgIGdhcDogMC41cmVtO1xuICAgIH1cbiAgICAjb2RlX3Bsb3R0ZXJfYWRqdXN0bWVudHMgbGFiZWwge1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IGVuZDtcbiAgICB9XG5cbiAgICAjb2RlX3Bsb3R0ZXJfY29uZmlnX2Rpc3BsYXkge1xuICAgICAgICB3aWR0aDogZml0LWNvbnRlbnQ7XG4gICAgICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XG4gICAgfVxuXG4gICAgLm9kZV9wbG90dGVyX2Rpc3BsYXkge1xuICAgICAgICBtYXJnaW4tbGVmdDogMC4xcmVtO1xuICAgICAgICBwYWRkaW5nOiAwIDAuNXJlbTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgICB9XG5cbiAgICAuaGlkZGVuIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG48L3N0eWxlPlxuXG48ZGl2IGlkPVwib2RlX3Bsb3R0ZXJfcGxheV9jb250cm9sc1wiPlxuICAgIDxidXR0b24gaWQ9XCJvZGVfcGxvdHRlcl9nb1wiPkdvPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cIm9kZV9wbG90dGVyX3BhdXNlXCIgY2xhc3M9XCJoaWRkZW5cIj5QYXVzZTwvYnV0dG9uPlxuPC9kaXY+XG48ZGl2IGlkPVwib2RlX3Bsb3R0ZXJfaW5mb19kaXNwbGF5XCI+XG4gICAgPGRpdiBpZD1cIm9kZV9wbG90dGVyX2NvbnRyb2xzXCI+XG4gICAgICAgIDxkaXYgaWQ9XCJvZGVfcGxvdHRlcl9hZGp1c3RtZW50c1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBvaW50c19wZXJfbG9vcFwiPlRpbWUgc3RlcHMgcGVyIGxvb3A8L2xhYmVsPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJwb2ludHNfcGVyX2xvb3BcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIxXCIgbWF4PVwiMTAwMDBcIiB2YWx1ZT1cIjEwMDBcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBpZD1cInBvaW50c19wZXJfbG9vcF9kaXNwbGF5XCIgY2xhc3M9XCJvZGVfcGxvdHRlcl9kaXNwbGF5XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwibG9vcF9kZWxheVwiPkxvb3AgZGVsYXk8L2xhYmVsPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJsb29wX2RlbGF5XCIgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD1cIjUwMFwiIHZhbHVlPVwiMFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwibG9vcF9kZWxheV9kaXNwbGF5XCIgY2xhc3M9XCJvZGVfcGxvdHRlcl9kaXNwbGF5XCI+PC9zcGFuPiBtc1xuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwicG9pbnRzX3Nob3duXCI+VGltZSBzdGVwcyBzaG93bjwvbGFiZWw+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInBvaW50c19zaG93blwiIHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCIxMDAwMDBcIiBzdGVwPVwiMTBcIiB2YWx1ZT1cIjIwMDAwXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwb2ludHNfc2hvd25fZGlzcGxheVwiIGNsYXNzPVwib2RlX3Bsb3R0ZXJfZGlzcGxheVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBvaW50X2NvdW50X2Rpc3BsYXlcIj5Ub3RhbCB0aW1lIHN0ZXBzPC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwb2ludF9jb3VudF9kaXNwbGF5XCIgY2xhc3M9XCJvZGVfcGxvdHRlcl9kaXNwbGF5XCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJoaWRkZW5cIiBmb3I9XCJwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlcIj5Qb2ludCBjbG91ZCBzdGVwczwvbGFiZWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlcIiBjbGFzcz1cIm9kZV9wbG90dGVyX2Rpc3BsYXlcIj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImhpZGRlblwiIGZvcj1cInBvaW50X2Nsb3VkX3BvaW50c19wZXJfbG9vcFwiPlBDIHN0ZXBzIHBlciBsb29wPC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoaWRkZW5cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJwb2ludF9jbG91ZF9wb2ludHNfcGVyX2xvb3BcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIxXCIgbWF4PVwiMTAwXCIgdmFsdWU9XCIxXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwb2ludF9jbG91ZF9wb2ludHNfcGVyX2xvb3BfZGlzcGxheVwiIGNsYXNzPVwib2RlX3Bsb3R0ZXJfZGlzcGxheVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGlkPVwib2RlX3Bsb3R0ZXJfY29uZmlnX2Rpc3BsYXlcIj48L2Rpdj5cbjwvZGl2PlxuPGRpdiBpZD1cIm9kZV9wbG90dGVyX3Bsb3RcIj48L2Rpdj5cbmA7XG5cbmZ1bmN0aW9uIHNldHVwKHRoZV9vdXRwdXRfY29udGV4dCwgdGhlX2VxdWF0aW9uX2RlZikge1xuICAgIHRoZV9vdXRwdXRfY29udGV4dC5jcmVhdGVfb3V0cHV0X2VsZW1lbnQoKS5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgY29uc3QgcGxvdF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvZGVfcGxvdHRlcl9wbG90Jyk7XG5cbiAgICBjb25zdCBnb19idXR0b24gICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2RlX3Bsb3R0ZXJfZ28nKTtcbiAgICBjb25zdCBwYXVzZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2RlX3Bsb3R0ZXJfcGF1c2UnKTtcblxuICAgIGZ1bmN0aW9uIHNldF9nb19idXR0b25fc3RhdGUocnVubmluZykge1xuICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgZ29fYnV0dG9uLmlubmVyVGV4dCA9ICdTdG9wJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdvX2J1dHRvbi5pbm5lclRleHQgPSAnR28nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0X3BhdXNlX2J1dHRvbl9zdGF0ZShwYXVzZWQsIHJ1bm5pbmcpIHtcbiAgICAgICAgcGF1c2VfYnV0dG9uLmlubmVyVGV4dCA9IHBhdXNlZCA/ICdSZXN1bWUnIDogJ1BhdXNlJztcbiAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHBhdXNlX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhdXNlX2J1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRfZ29fYnV0dG9uX3N0YXRlKGZhbHNlKTtcbiAgICBzZXRfcGF1c2VfYnV0dG9uX3N0YXRlKGZhbHNlLCBmYWxzZSk7XG5cbiAgICBjb25zdCBwb2ludHNfcGVyX2xvb3BfZWwgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50c19wZXJfbG9vcCcpO1xuICAgIGNvbnN0IGxvb3BfZGVsYXlfZWwgICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9vcF9kZWxheScpO1xuICAgIGNvbnN0IHBvaW50c19zaG93bl9lbCAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9pbnRzX3Nob3duJyk7XG4gICAgY29uc3QgcG9pbnRfY291bnRfZGlzcGxheV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2ludF9jb3VudF9kaXNwbGF5Jyk7XG5cbiAgICBjb25zdCBwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlfZWwgICAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50X2Nsb3VkX2xvb3BfZGlzcGxheScpO1xuICAgIGNvbnN0IHBvaW50X2Nsb3VkX2xvb3BfZGlzcGxheV9wYXJlbnRfZWwgICAgPSBwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlfZWwucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlfbGFiZWxfZWwgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPVwicG9pbnRfY2xvdWRfbG9vcF9kaXNwbGF5XCJdJyk7XG4gICAgY29uc3QgcG9pbnRfY2xvdWRfcG9pbnRzX3Blcl9sb29wX2xhYmVsX2VsICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj1cInBvaW50X2Nsb3VkX3BvaW50c19wZXJfbG9vcFwiXScpO1xuICAgIGNvbnN0IHBvaW50X2Nsb3VkX3BvaW50c19wZXJfbG9vcF9lbCAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9pbnRfY2xvdWRfcG9pbnRzX3Blcl9sb29wJyk7XG4gICAgY29uc3QgcG9pbnRfY2xvdWRfcG9pbnRzX3Blcl9sb29wX3BhcmVudF9lbCA9IHBvaW50X2Nsb3VkX3BvaW50c19wZXJfbG9vcF9lbC5wYXJlbnRFbGVtZW50O1xuXG4gICAgZm9yIChjb25zdCByYW5nZV9pZCBvZiBbXG4gICAgICAgICdwb2ludHNfcGVyX2xvb3AnLFxuICAgICAgICAnbG9vcF9kZWxheScsXG4gICAgICAgICdwb2ludHNfc2hvd24nLFxuICAgICAgICAncG9pbnRfY2xvdWRfcG9pbnRzX3Blcl9sb29wJyxcbiAgICBdKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlX2VsICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyYW5nZV9pZCk7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtyYW5nZV9pZH1fZGlzcGxheWApO1xuICAgICAgICBkaXNwbGF5X2VsLmlubmVyVGV4dCA9IHJhbmdlX2VsLnZhbHVlO1xuICAgICAgICByYW5nZV9lbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZGlzcGxheV9lbC5pbm5lclRleHQgPSByYW5nZV9lbC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0X3BvaW50X2Nsb3VkX2xvb3BfZGlzcGxheSh2aXNpYmxlLCB2YWx1ZT0nJykge1xuICAgICAgICBwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXkuaW5uZXJUZXh0ID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IGFmZmVjdGVkX2VscyA9IFtcbiAgICAgICAgICAgIHBvaW50X2Nsb3VkX2xvb3BfZGlzcGxheV9wYXJlbnRfZWwsXG4gICAgICAgICAgICBwb2ludF9jbG91ZF9sb29wX2Rpc3BsYXlfbGFiZWxfZWwsXG4gICAgICAgICAgICBwb2ludF9jbG91ZF9wb2ludHNfcGVyX2xvb3BfbGFiZWxfZWwsXG4gICAgICAgICAgICBwb2ludF9jbG91ZF9wb2ludHNfcGVyX2xvb3BfcGFyZW50X2VsLFxuICAgICAgICBdO1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBhZmZlY3RlZF9lbHMpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWwgb2YgYWZmZWN0ZWRfZWxzKSB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0X3BvaW50X2Nsb3VkX2xvb3BfZGlzcGxheShmYWxzZSk7XG5cbiAgICBjb25zdCBjb25maWdfZGlzcGxheV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvZGVfcGxvdHRlcl9jb25maWdfZGlzcGxheScpO1xuXG4gICAgZnVuY3Rpb24gZGlzcGxheV9jb25maWcoY29uZmlnKSB7XG4gICAgICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWdfZGlzcGxheV9lbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGNvbmZpZ19kaXNwbGF5X2VsLmlubmVyVGV4dCA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uZmlnX2Rpc3BsYXlfZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBjb25zdCB7IGR0LCB4MCwgcGFyYW1zLCBza2lwLCBzdGVwcywgcG9pbnRfY2xvdWQgfSA9IGNvbmZpZztcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gW107XG4gICAgICAgICAgICBsaW5lcy5wdXNoKCctLS0gQ09ORklHIC0tLScpO1xuICAgICAgICAgICAgbGluZXMucHVzaChgZHQ6ICR7ZHR9YCk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGB4MDogWyR7eDAuam9pbignLCAnKX1dYCk7XG4gICAgICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmFtc19zdHI7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNfc3RyID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zX3N0ciA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zX3N0ciA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGBwYXJhbXM6ICR7cGFyYW1zX3N0cn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChza2lwKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgc2tpcDogJHtza2lwfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0ZXBzKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgc3RlcHM6ICR7c3RlcHN9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9pbnRfY2xvdWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG4sIGMsIHIsIGR0OnBjX2R0PWR0LCBzdGVwczpwY19zdGVwcyB9ID0gcG9pbnRfY2xvdWQ7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLS0tIHBvaW50IGNsb3VkIC0tLWApO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYG46ICR7bn0sIGM6IFske2Muam9pbignLCAnKX1dLCBkdDogJHtwY19kdH0ke3BjX3N0ZXBzID8gYCwgc3RlcHM6JHtwY19zdGVwc31gIDogJyd9fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnX2Rpc3BsYXlfZWwuaW5uZXJUZXh0ID0gbGluZXMuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcGxheV9jb25maWcoKTtcblxuICAgIGNvbnN0IHBsb3RfaGVpZ2h0ID0gNzIwO1xuICAgIHBsb3RfZWwuc3R5bGUgPSBgaGVpZ2h0OiAke3Bsb3RfaGVpZ2h0fXB4YDtcblxuICAgIGNvbnN0IEdlbmVyYXRvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmdW5jdGlvbiooKXt9KS5jb25zdHJ1Y3RvcjtcblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlX2YoZikge1xuICAgICAgICBpZiAodHlwZW9mIGYgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZV9pbnRlZ3JhdG9yKGludGVncmF0b3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnRlZ3JhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVncmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdmFsaWRhdGVfcG9pbnRfY2xvdWQocG9pbnRfY2xvdWQpIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgcG9pbnRfY2xvdWQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvaW50X2Nsb3VkIG11c3QgYmUgYW4gb2JqZWN0JylcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG4sIGMsIHIsIGR0LCBzdGVwcyB9ID0gcG9pbnRfY2xvdWQ7XG4gICAgICAgIGlmICh0eXBlb2YgbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9pbnRfY2xvdWQubiBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9pbnRfY2xvdWQubiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9pbnRfY2xvdWQuYyBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShjKSB8fCBjLmxlbmd0aCA8PSAwIHx8IGMuc29tZShlID0+ICh0eXBlb2YgZSAhPT0gJ251bWJlcicpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwb2ludF9jbG91ZC5jIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXkgb2YgbnVtYmVyc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9pbnRfY2xvdWQuciBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgciAhPT0gJ251bWJlcicgfHwgciA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvaW50X2Nsb3VkLnIgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZHQgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgZHQgIT09ICdudW1iZXInIHx8IGR0IDw9IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHBvaW50X2Nsb3VkLmR0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHN0ZXBzICE9PSAndW5kZWZpbmVkJyAmJiAoIU51bWJlci5pc0ludGVnZXIoc3RlcHMpIHx8IHN0ZXBzIDwgMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RlcHMgcG9pbnRfY2xvdWRtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZV9jb25maWcoY29uZmlnLCBzdHJ1Y3R1cmVfbmFtZT0nY29uZmlnJykge1xuICAgICAgICBpZiAoIHR5cGVvZiBjb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c3RydWN0dXJlX25hbWV9IG11c3QgYmUgYW4gb2JqZWN0YClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGludGVncmF0b3IsIGR0LCB4MCwgc2tpcCwgc3RlcHMsIHBvaW50X2Nsb3VkIH0gPSBjb25maWc7ICAvLyBwYXJhbXMgaXMgdW5yZXN0cmljdGVkXG4gICAgICAgIGlmIChpbnRlZ3JhdG9yKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZV9pbnRlZ3JhdG9yKGludGVncmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZHQgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgZHQgIT09ICdudW1iZXInIHx8IGR0IDw9IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c3RydWN0dXJlX25hbWV9LmR0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHgwICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICghQXJyYXkuaXNBcnJheSh4MCkgfHwgeDAubGVuZ3RoIDw9IDAgfHwgeDAuc29tZShlID0+ICh0eXBlb2YgZSAhPT0gJ251bWJlcicpKSkgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c3RydWN0dXJlX25hbWV9LngwIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXkgb2YgbnVtYmVyc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2tpcCAhPT0gJ3VuZGVmaW5lZCcgJiYgKCFOdW1iZXIuaXNJbnRlZ2VyKHNraXApIHx8IHNraXAgPCAwKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3N0cnVjdHVyZV9uYW1lfS5za2lwIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlcmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc3RlcHMgIT09ICd1bmRlZmluZWQnICYmICghTnVtYmVyLmlzSW50ZWdlcihzdGVwcykgfHwgc3RlcHMgPCAwKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3N0cnVjdHVyZV9uYW1lfS5zdGVwcyBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9pbnRfY2xvdWQpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlX3BvaW50X2Nsb3VkKHBvaW50X2Nsb3VkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZV9lcXVhdGlvbl9kZWYoZXF1YXRpb25fZGVmKSB7XG4gICAgICAgIGlmICggdHlwZW9mIGVxdWF0aW9uX2RlZiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXF1YXRpb24gZGVmaW5pdGlvbiBtdXN0IGJlIGFuIG9iamVjdCcpXG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVfY29uZmlnKGVxdWF0aW9uX2RlZiwgJ2VxdWF0aW9uX2RlZicpOyAgLy8gZXF1YXRpb25fZGVmIGlzIGEgc3ViY2xhc3Mgb2YgY29uZmlnXG4gICAgICAgIGNvbnN0IHsgdGl0bGUsIGYsIGl0ZXIsIGl0ZXJfZGVsYXkgfSA9IGVxdWF0aW9uX2RlZjtcbiAgICAgICAgaWYgKHR5cGVvZiB0aXRsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcXVhdGlvbl9kZWYudGl0bGUgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVyKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVyYXRvcl9mbiA9IGl0ZXJbU3ltYm9sLml0ZXJhdG9yXTtcbiAgICAgICAgICAgIGlmICggKHR5cGVvZiBpdGVyYXRvcl9mbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGl0ZXJhdG9yX2ZuICE9PSAnZnVuY3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAhKGl0ZXIgaW5zdGFuY2VvZiBHZW5lcmF0b3IpICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXF1YXRpb25fZGVmLml0ZXIgbXVzdCBiZSBhbiBpdGVyYWJsZSBvciBhIGdlbmVyYXRvciBmdW5jdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgaXRlcl9kZWxheSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHR5cGVvZiBpdGVyX2RlbGF5ICE9PSAnbnVtYmVyJyB8fCBpdGVyX2RlbGF5IDwgMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXF1YXRpb25fZGVmLml0ZXJfZGVsYXkgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VxdWF0aW9uX2RlZi5mIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVfZihmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBydW5uZXI7XG4gICAgY29uc3Qgc2V0X3J1bm5pbmdfc3RhdGUgPSAocnVubmluZykgPT4ge1xuICAgICAgICBydW5uZXI/LnN0b3AoKTtcbiAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld19ydW5uZXIgPSBuZXcgUnVubmVyKHRoZV9lcXVhdGlvbl9kZWYpO1xuICAgICAgICAgICAgcnVubmVyID0gbmV3X3J1bm5lcjtcbiAgICAgICAgICAgIG5ld19ydW5uZXIuZG9uZS50aGVuKFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdfcnVubmVyLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldF9ydW5uaW5nX3N0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld19ydW5uZXIuc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0X3J1bm5pbmdfc3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHBvaW50X2NvdW50X2Rpc3BsYXlfZWwuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgICAgICBnb19idXR0b24uaW5uZXJUZXh0ID0gJ1N0b3AnO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29kZV9wbG90dGVyX3BsYXlfY29udHJvbHMnKS5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcnVubmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZ29fYnV0dG9uLmlubmVyVGV4dCA9ICdHbyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ29fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIHNldF9ydW5uaW5nX3N0YXRlKCFydW5uZXIpO1xuICAgIH0pO1xuXG4gICAgY2xhc3MgUnVubmVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoZXF1YXRpb25fZGVmKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZV9lcXVhdGlvbl9kZWYoZXF1YXRpb25fZGVmKTtcblxuICAgICAgICAgICAgdGhpcy5fZXF1YXRpb25fZGVmID0gZXF1YXRpb25fZGVmO1xuXG4gICAgICAgICAgICB0aGlzLl94cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5feXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3pzID0gW107XG4gICAgICAgICAgICB0aGlzLl9jcyA9IFtdO1xuXG4gICAgICAgICAgICB0aGlzLl9nZGF0YSA9IFt7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2VxdWF0aW9uJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2NhdHRlcjNkJyxcbiAgICAgICAgICAgICAgICBtb2RlOiAnbGluZXMnLFxuICAgICAgICAgICAgICAgIHg6IHRoaXMuX3hzLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMuX3lzLFxuICAgICAgICAgICAgICAgIHo6IHRoaXMuX3pzLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMyxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuX2NzLFxuICAgICAgICAgICAgICAgICAgICByZXZlcnNlc2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2UgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2V4dHJlbWEnLFxuICAgICAgICAgICAgICAgIHNob3dsZWdlbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdzY2F0dGVyM2QnLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdtYXJrZXJzJyxcbiAgICAgICAgICAgICAgICB4OiBbXSxcbiAgICAgICAgICAgICAgICB5OiBbXSxcbiAgICAgICAgICAgICAgICB6OiBbXSxcbiAgICAgICAgICAgICAgICBtYXJrZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuMDEpJyxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2dkYXRhLnB1c2godGhpcy5fZXh0cmVtYV90cmFjZSk7XG5cblxuICAgICAgICAgICAgZGlzcGxheV9jb25maWcoKTtcbiAgICAgICAgICAgIHNldF9wb2ludF9jbG91ZF9sb29wX2Rpc3BsYXkoZmFsc2UpO1xuXG4gICAgICAgICAgICB0aGlzLl9tb3VzZV9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX3RoZV9wbG90X2VsX21vdXNlZG93bl9oYW5kbGVyID0gKGV2ZW50KSA9PiB7IHRoaXMuX21vdXNlX3BhdXNlZCA9IHRydWU7IH07XG4gICAgICAgICAgICB0aGlzLl90aGVfcGxvdF9lbF9tb3VzZWRvd25faGFuZGxlcl9vcHRpb25zID0geyBjYXB0dXJlOiB0cnVlIH07XG4gICAgICAgICAgICB0aGlzLl90aGVfcGxvdF9lbF9tb3VzZXVwX2hhbmRsZXIgPSAoZXZlbnQpID0+IHsgdGhpcy5fbW91c2VfcGF1c2VkID0gZmFsc2U7IH07XG4gICAgICAgICAgICB0aGlzLl90aGVfcGxvdF9lbF9tb3VzZXVwX2hhbmRsZXJfb3B0aW9ucyA9IHsgY2FwdHVyZTogdHJ1ZSB9O1xuICAgICAgICAgICAgcGxvdF9lbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdtb3VzZWRvd24nLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RoZV9wbG90X2VsX21vdXNlZG93bl9oYW5kbGVyLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RoZV9wbG90X2VsX21vdXNlZG93bl9oYW5kbGVyX29wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwbG90X2VsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ21vdXNldXAnLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RoZV9wbG90X2VsX21vdXNldXBfaGFuZGxlcixcbiAgICAgICAgICAgICAgICB0aGlzLl90aGVfcGxvdF9lbF9tb3VzZXVwX2hhbmRsZXJfb3B0aW9uc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fdGhlX3BhdXNlX2J1dHRvbl9jbGlja19oYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnV0dG9uX3BhdXNlZCA9ICF0aGlzLl9idXR0b25fcGF1c2VkO1xuICAgICAgICAgICAgICAgIHNldF9wYXVzZV9idXR0b25fc3RhdGUodGhpcy5fYnV0dG9uX3BhdXNlZCwgdGhpcy5fcnVubmluZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fdGhlX3BhdXNlX2J1dHRvbl9jbGlja19oYW5kbGVyX29wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHBhdXNlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGhlX3BhdXNlX2J1dHRvbl9jbGlja19oYW5kbGVyLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RoZV9wYXVzZV9idXR0b25fY2xpY2tfaGFuZGxlcl9vcHRpb25zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLl9zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2RvbmUgPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0X2dvX2J1dHRvbl9zdGF0ZSh0aGlzLl9ydW5uaW5nKTtcbiAgICAgICAgICAgICAgICBzZXRfcGF1c2VfYnV0dG9uX3N0YXRlKHRoaXMuX2J1dHRvbl9wYXVzZWQsIHRoaXMuX3J1bm5pbmcpO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0aXRsZSwgZiwgaXRlcl9kZWxheSB9ID0gdGhpcy5fZXF1YXRpb25fZGVmO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB7IGl0ZXIgfSA9IHRoaXMuX2VxdWF0aW9uX2RlZjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyID0gW3t9XTsgIC8vIG9uZSBlbXB0eSBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVyIGluc3RhbmNlb2YgR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyID0gaXRlcih0aGlzLl9lcXVhdGlvbl9kZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZXIgaXMgbm93IGFuIGl0ZXJhYmxlXG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpcnN0X2l0ZXJhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29uZmlnIG9mIGl0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhcl9kYXRhKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZF9jb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fZXF1YXRpb25fZGVmLCAgLy8gdGhpcy5fZXF1YXRpb25fZGVmIG1heSBjb250YWluIGNvbmZpZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLCAgICAgICAgICAgICAgLy8gY29uZmlnIHByb3BlcnRpZXMgb3ZlcnJpZGUgdGhvc2UgaW4gdGhpcy5fZXF1YXRpb25fZGVmXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVfY29uZmlnKG1lcmdlZF9jb25maWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlcl9kZWxheSAmJiAhZmlyc3RfaXRlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGl0ZXJfZGVsYXkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X2l0ZXJhdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGludGVncmF0b3IsIGR0LCB4MCwgcGFyYW1zLCBza2lwPTAsIHN0ZXBzPUluZmluaXR5LCBwb2ludF9jbG91ZCB9ID0gbWVyZ2VkX2NvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW50ZWdyYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVncmF0b3Igd2FzIG5vdCBzcGVjaWZpZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkdCB3YXMgbm90IHNwZWNpZmllZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB4MCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3gwIHdhcyBub3Qgc3BlY2lmaWVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfY29uZmlnKG1lcmdlZF9jb25maWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IFsgLi4ueDAgXTsgIC8vIGNvcHkgeDAgdG8gaW5zdWxhdGUgZnJvbSBtdXRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraXAgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZCh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBsb3RfZm4gPSBQbG90bHkubmV3UGxvdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb2ludF9jb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fcnVubmluZyAmJiBwb2ludF9jb3VudCA8IHNraXArc3RlcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50c19wZXJfbG9vcCA9IHBhcnNlSW50KHBvaW50c19wZXJfbG9vcF9lbC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxwID0gMDsgbHAgPCBwb2ludHNfcGVyX2xvb3A7IGxwKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGludGVncmF0b3IoZHQsIGYsIHgsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9jb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50X2NvdW50ID49IHNraXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGQoeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRfY291bnQgPj0gc2tpcCtzdGVwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJpbV9kYXRhKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50X2NvdW50ID49IHNraXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RyYXdfZGF0YShwbG90X2ZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsb3RfZm4gPSBQbG90bHkucmVhY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9jb3VudF9kaXNwbGF5X2VsLmlubmVyVGV4dCA9IHBvaW50X2NvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludF9jb3VudCA8IHNraXArc3RlcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9vcF9kZWxheSA9IHBhcnNlSW50KGxvb3BfZGVsYXlfZWwudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbG9vcF9kZWxheSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uZSBwbG90dGluZyBncmFwaCBmb3IgdGhpcyBjb25maWcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBydW4gaXRzIHBvaW50IGNsb3VkLCBpZiBhbnkuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcnVubmluZyAmJiBwb2ludF9jbG91ZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3J1bl9wb2ludF9jbG91ZChmLCBtZXJnZWRfY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UsIGVyci5zdGFjayk7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KGAke2Vyci5tZXNzYWdlfVxcblxcbiR7ZXJyLnN0YWNrfWApO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldCBydW5uaW5nICgpeyByZXR1cm4gdGhpcy5fcnVubmluZzsgfVxuICAgICAgICBnZXQgcGF1c2VkICAoKXsgcmV0dXJuIHRoaXMuX21vdXNlX3BhdXNlZCB8fCB0aGlzLl9idXR0b25fcGF1c2VkOyB9XG4gICAgICAgIGdldCBzdG9wcGVkICgpeyByZXR1cm4gdGhpcy5fc3RvcHBlZDsgfVxuICAgICAgICBnZXQgZG9uZSAgICAoKXsgcmV0dXJuIHRoaXMuX2RvbmU7IH1cblxuICAgICAgICBzdG9wKCkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBwbG90X2VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ21vdXNlZG93bicsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGhlX3Bsb3RfZWxfbW91c2Vkb3duX2hhbmRsZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGhlX3Bsb3RfZWxfbW91c2Vkb3duX2hhbmRsZXJfb3B0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHBsb3RfZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnbW91c2V1cCcsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGhlX3Bsb3RfZWxfbW91c2V1cF9oYW5kbGVyLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RoZV9wbG90X2VsX21vdXNldXBfaGFuZGxlcl9vcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcGF1c2VfYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICB0aGlzLl90aGVfcGF1c2VfYnV0dG9uX2NsaWNrX2hhbmRsZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGhlX3BhdXNlX2J1dHRvbl9jbGlja19oYW5kbGVyX29wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBzZXRfcGF1c2VfYnV0dG9uX3N0YXRlKHRoaXMuX2J1dHRvbl9wYXVzZWQsIHRoaXMuX3J1bm5pbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW50ZXJuYWxcblxuICAgICAgICBfY2xlYXJfZGF0YSgpIHtcbiAgICAgICAgICAgIHRoaXMuX3hzLnNwbGljZSgwLCB0aGlzLl94cy5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5feXMuc3BsaWNlKDAsIHRoaXMuX3lzLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLl96cy5zcGxpY2UoMCwgdGhpcy5fenMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuX2NzLnNwbGljZSgwLCB0aGlzLl9jcy5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RyaW1fZGF0YSgpIHtcbiAgICAgICAgICAgIGxldCBsaW1pdCA9IHBhcnNlSW50KHBvaW50c19zaG93bl9lbC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoaXNOYU4obGltaXQpKSB7XG4gICAgICAgICAgICAgICAgbGltaXQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3hzLmxlbmd0aCA+IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5feHMuc3BsaWNlKDAsIHRoaXMuX3hzLmxlbmd0aC1saW1pdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5feXMuc3BsaWNlKDAsIHRoaXMuX3lzLmxlbmd0aC1saW1pdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fenMuc3BsaWNlKDAsIHRoaXMuX3pzLmxlbmd0aC1saW1pdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3Muc3BsaWNlKDAsIHRoaXMuX2NzLmxlbmd0aC1saW1pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfYWRkKFt4LCB5LCB6XSwgYz0xKSB7XG4gICAgICAgICAgICB0aGlzLl94cy5wdXNoKHggPz8gMCk7XG4gICAgICAgICAgICB0aGlzLl95cy5wdXNoKHkgPz8gMCk7XG4gICAgICAgICAgICB0aGlzLl96cy5wdXNoKHogPz8gMCk7XG4gICAgICAgICAgICB0aGlzLl9jcy5wdXNoKGMpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2RyYXdfZGF0YShwbG90X2ZuLCBub191cGRhdGVfcmV2aXNpb249ZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBleHRyZW1hXG4gICAgICAgICAgICBsZXQgdmFsdWVzX3NlZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBtaW5feCA9IEluZmluaXR5LCBtYXhfeCA9IC1JbmZpbml0eSxcbiAgICAgICAgICAgICAgICBtaW5feSA9IEluZmluaXR5LCBtYXhfeSA9IC1JbmZpbml0eSxcbiAgICAgICAgICAgICAgICBtaW5feiA9IEluZmluaXR5LCBtYXhfeiA9IC1JbmZpbml0eTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2Ugb2YgdGhpcy5fZ2RhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2UueC5sZW5ndGggPiAwIHx8IHRyYWNlLnkubGVuZ3RoID4gMCB8fCB0cmFjZS56Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzX3NlZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB0cmFjZS54KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluX3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbl94ID0gdjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heF94KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfeCA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHRyYWNlLnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5feSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluX3kgPSB2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4X3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF95ID0gdjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdHJhY2Uueikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IG1pbl96KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5feiA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPiBtYXhfeikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3ogPSB2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlc19zZWVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2gobWluX3gpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2UueS5wdXNoKDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2Uuei5wdXNoKDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2gobWF4X3gpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2UueS5wdXNoKDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2Uuei5wdXNoKDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS55LnB1c2gobWluX3kpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2Uuei5wdXNoKDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS55LnB1c2gobWF4X3kpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4dHJlbWFfdHJhY2Uuei5wdXNoKDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS55LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS56LnB1c2gobWluX3opO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS54LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS55LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmVtYV90cmFjZS56LnB1c2gobWF4X3opO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgbGF5b3V0XG4gICAgICAgICAgICBjb25zdCBsYXlvdXQgPSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBwbG90X2hlaWdodCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIW5vX3VwZGF0ZV9yZXZpc2lvbikge1xuICAgICAgICAgICAgICAgIGxheW91dC5kYXRhcmV2aXNpb24gPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm90ZTogcGxvdF9lbC5fZnVsbExheW91dCBpcyB1bmRvY3VtZW50ZWQuLi5cbiAgICAgICAgICAgIGlmIChwbG90X2VsLl9mdWxsTGF5b3V0Py5zY2VuZT8uY2FtZXJhKSB7XG4gICAgICAgICAgICAgICAgbGF5b3V0LnNjZW5lID0ge1xuICAgICAgICAgICAgICAgICAgICBjYW1lcmE6IHBsb3RfZWwuX2Z1bGxMYXlvdXQuc2NlbmUuY2FtZXJhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fZXF1YXRpb25fZGVmPy50aXRsZSkge1xuICAgICAgICAgICAgICAgIGxheW91dC50aXRsZSA9IHRoaXMuX2VxdWF0aW9uX2RlZi50aXRsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsb3RfZm4ocGxvdF9lbCwgdGhpcy5fZ2RhdGEsIGxheW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBfcnVuX3BvaW50X2Nsb3VkKGYsIGNvbmZpZykge1xuICAgICAgICAgICAgY29uc3QgeyBpbnRlZ3JhdG9yLCBkdCwgeDAsIHBhcmFtcywgcG9pbnRfY2xvdWQgfSA9IGNvbmZpZztcbiAgICAgICAgICAgIGNvbnN0IHsgbiwgYywgciwgZHQ6cGNfZHQ9ZHQsIHN0ZXBzPUluZmluaXR5IH0gPSBwb2ludF9jbG91ZDtcblxuICAgICAgICAgICAgY29uc3QgQXJyYXlUeXBlID0gRmxvYXQ2NEFycmF5O1xuXG4gICAgICAgICAgICBzZXRfcG9pbnRfY2xvdWRfbG9vcF9kaXNwbGF5KHRydWUsICcnKTtcblxuICAgICAgICAgICAgLy8gY29uZmlnIGNvbnRhaW5zIHBvaW50X2Nsb3VkXG4gICAgICAgICAgICAvLyBhc3N1bWUgY29uZmlnIGhhcyBhbHJlYWR5IGJlZW4gdmFsaWRhdGVkXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2dkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkOiAhdGhpcy5fZ2RhdGEnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2V0IHVwIHdvcmtlcnNcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlcl9jb3VudCA9IHdvcmtlcl9wb29sLndvcmtlcnMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcG9pbnRzX3Blcl93b3JrZXIgPSBNYXRoLmZsb29yKG4gLyB3b3JrZXJfY291bnQpO1xuICAgICAgICAgICAgY29uc3Qgd29ya2VyX2Rlc2NzID0gWyAuLi53b3JrZXJfcG9vbC53b3JrZXJzIF0ubWFwKCh3b3JrZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpbmRleCpwb2ludHNfcGVyX3dvcmtlcjtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgICA9IChpbmRleCA+PSB3b3JrZXJfY291bnQtMSkgPyBuIDogKHN0YXJ0ICsgcG9pbnRzX3Blcl93b3JrZXIpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRfY291bnQgPSAoZW5kIC0gc3RhcnQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGNfdHJhY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwb2ludCBjbG91ZCcsXG4gICAgICAgICAgICAgICAgICAgIHNob3dsZWdlbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzY2F0dGVyM2QnLFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiAnbWFya2VycycsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDAsIDAsIDI1NSwgMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIHg6IG5ldyBBcnJheVR5cGUocG9pbnRfY291bnQpLFxuICAgICAgICAgICAgICAgICAgICB5OiBuZXcgQXJyYXlUeXBlKHBvaW50X2NvdW50KSxcbiAgICAgICAgICAgICAgICAgICAgejogbmV3IEFycmF5VHlwZShwb2ludF9jb3VudCksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlcixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50X2NvdW50LFxuICAgICAgICAgICAgICAgICAgICBwY190cmFjZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIHdvcmtlciBzdGF0ZSwgZXRjXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmtlcl9kZXNjIG9mIHdvcmtlcl9kZXNjcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlciAgID0gd29ya2VyX2Rlc2Mud29ya2VyO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBjX3RyYWNlID0gd29ya2VyX2Rlc2MucGNfdHJhY2U7XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBwY190cmFjZSB4LCB5LCB6IGFycmF5cyB3aXRoIHRoZSBpbml0aWFsIHZhbHVlc1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ya2VyX2Rlc2MucG9pbnRfY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSB0aGUgaW5pdGlhbCBwb3NpdGlvbnMgb2YgdGhlIHBvaW50c1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcG9pbnRzIHdlIGdlbmVyYXRlIGhlcmUgbGllIGluIGEgTi1jdWJlIGNlbnRlcmVkIGF0IGNcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBzaWRlIGxlbmd0aCAyKnIgKHdoZXJlIE4gPSBjLmxlbmd0aCkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFsgeCwgeSwgeiBdID0gYy5tYXAoeGkgPT4geGkgKyByKjIqKE1hdGgucmFuZG9tKCkgLSAwLjUpKTtcbiAgICAgICAgICAgICAgICAgICAgcGNfdHJhY2UueFtpXSA9IHg7XG4gICAgICAgICAgICAgICAgICAgIHBjX3RyYWNlLnlbaV0gPSB5O1xuICAgICAgICAgICAgICAgICAgICBwY190cmFjZS56W2ldID0gejtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgbmV3IHRyYWNlIHRvIHRoZSBncmFwaGljcyBkYXRhXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2RhdGEucHVzaChwY190cmFjZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgd29ya2VyIHN0YXRlXG4gICAgICAgICAgICAgICAgYXdhaXQgd29ya2VyLmV2YWwoYFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBbIHBjX2R0LCBwYXJhbXMsIHBvaW50X2NvdW50LCB4LCB5LCB6IF0gPSBvYmplY3RzO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgcGNfZHQsIHBhcmFtcywgcG9pbnRfY291bnQsIHgsIHksIHogfSk7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuaW50ZWdyYXRvciA9ICR7aW50ZWdyYXRvci50b1N0cmluZygpfTtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5mID0gJHtmLnRvU3RyaW5nKCl9O1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLnBvaW50c19idWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIocG9pbnRfY291bnQqMypGbG9hdDY0QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLnBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50X2NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50X3ZpZXcgPSBuZXcgRmxvYXQ2NEFycmF5KGdsb2JhbFRoaXMucG9pbnRzX2J1ZmZlciwgaSozKkZsb2F0NjRBcnJheS5CWVRFU19QRVJfRUxFTUVOVCwgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludF92aWV3WzBdID0geFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50X3ZpZXdbMV0gPSB5W2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRfdmlld1syXSA9IHpbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLnBvaW50cy5wdXNoKHBvaW50X3ZpZXcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYCwgcGNfZHQsIHBhcmFtcywgd29ya2VyX2Rlc2MucG9pbnRfY291bnQsIHBjX3RyYWNlLngsIHBjX3RyYWNlLnksIHBjX3RyYWNlLnogKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFpbl9sb29wOlxuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzdGVwczsgLyogcyBpbmNyZW1lbnRlZCBiZWxvdyAqLykge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLnBhdXNlZCAmJiB0aGlzLl9ydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlKSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIG1haW5fbG9vcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBzdGFydCBjYWxjdWxhdGlvbnMgaW4gd29ya2VycyBmaXJzdCwgdGhlbiBkcmF3LFxuICAgICAgICAgICAgICAgIC8vIHRoZW4gd2FpdCBmb3IgY2FsY3VsYXRpb25zIHRvIGNvbXBsZXRlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gcGFyc2VJbnQocG9pbnRfY2xvdWRfcG9pbnRzX3Blcl9sb29wX2VsLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxjX3Byb21pc2UgPSBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyX2Rlc2NzLm1hcCh3b3JrZXJfZGVzYyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyX2Rlc2Mud29ya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV2YWwoYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbIGl0ZXJhdGlvbnMgXSA9IG9iamVjdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZXJhdGlvbiA9IDA7IGl0ZXJhdGlvbiA8IGl0ZXJhdGlvbnM7IGl0ZXJhdGlvbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50X2NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gaW50ZWdyYXRvcihwY19kdCwgZiwgcG9pbnQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeFtpXSA9IHBvaW50WzBdID0gcFswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W2ldID0gcG9pbnRbMV0gPSBwWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpbaV0gPSBwb2ludFsyXSA9IHBbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgeCwgeSwgeiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAsIGl0ZXJhdGlvbnMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChbIG5ld194LCBuZXdfeSwgbmV3X3ogXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXJfZGVzYy5wY190cmFjZS54ID0gbmV3X3g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlcl9kZXNjLnBjX3RyYWNlLnkgPSBuZXdfeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyX2Rlc2MucGNfdHJhY2UueiA9IG5ld196O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2RyYXdfZGF0YShQbG90bHkucmVhY3QsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgY2FsY19wcm9taXNlO1xuICAgICAgICAgICAgICAgIHMgKz0gaXRlcmF0aW9ucztcblxuICAgICAgICAgICAgICAgIHNldF9wb2ludF9jbG91ZF9sb29wX2Rpc3BsYXkodHJ1ZSwgcysxKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxvb3BfZGVsYXkgPSBwYXJzZUludChsb29wX2RlbGF5X2VsLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbG9vcF9kZWxheSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvZGVfcGxvdHRlcl9hZGp1c3RtZW50cycpLnNjcm9sbEludG9WaWV3KGZhbHNlKTtcbiAgICAgICAgZ29fYnV0dG9uLmZvY3VzKCk7XG4gICAgfSwgNTAwKTtcbn1cbnZhcnMoeyBzZXR1cCB9KTsiLCJvdXRwdXQiOltdLCJmb3JtYXR0aW5nX29wdGlvbnMiOnsiYWxpZ24iOiJsZWZ0IiwiaW5kZW50IjoiMGVtIn19LHsiaWQiOiJpZC1mZDkyMDRhNy0zODlhLTQxMWYtODRmMS03YWJhNzQ3YTg1MDUiLCJpbnB1dCI6Ii8vIGF1dG9oaWRlXG5cbi8vIGludGVncmF0b3I6XG4vLyBmKHgpIHJldHVybnMgeGRvdCB3aGljaCBoYXMgdGhlIHNhbWUgZGltZW5zaW9uIGFzIHhcbi8vIGludGVncmF0b3IgcmV0dXJucyBhIG5ldyB4IHdpdGggdGhlIHNhbWUgZGltZW5zaW9uIGFzIHRoZSBvcmlnaW5hbFxuXG5mdW5jdGlvbiBydW5nZV9rdXR0YV9pbnRlZ3JhdG9yKGR0LCBmLCB4LCBwYXJhbXMpIHtcbiAgICAvLyBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBmb3VydGgtb3JkZXIgUnVuZ2UtS3V0dGEgbWV0aG9kXG4gICAgLy8gYXMgcHJlc2VudGVkIGluIE5vbmxpbmVhciBEeW5hbWljcyBhbmQgQ2hhb3MsIFNlY29uZCBFZGl0aW9uLCBieVxuICAgIC8vIFN0ZXZlbiBILiBTdHJvZ2F0eiwgcGFnZSAzNC5cbiAgICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIHdvcmtzIGZvciB4IHdpdGggYXJiaXRyYXJ5IGRpbWVuc2lvbi5cbiAgICBjb25zdCBrMSA9IGYoIHgsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgKS5tYXAoIHhpZG90ID0+IHhpZG90KmR0ICk7XG4gICAgY29uc3QgazIgPSBmKCB4Lm1hcCggKHhpLCBpKSA9PiB4aSArIGsxW2ldLzIgKSwgcGFyYW1zICkubWFwKCB4aWRvdCA9PiB4aWRvdCpkdCApO1xuICAgIGNvbnN0IGszID0gZiggeC5tYXAoICh4aSwgaSkgPT4geGkgKyBrMltpXS8yICksIHBhcmFtcyApLm1hcCggeGlkb3QgPT4geGlkb3QqZHQgKTtcbiAgICBjb25zdCBrNCA9IGYoIHgubWFwKCAoeGksIGkpID0+IHhpICsgazNbaV0pLCAgICBwYXJhbXMgKS5tYXAoIHhpZG90ID0+IHhpZG90KmR0ICk7XG4gICAgcmV0dXJuIHgubWFwKCAoeGksIGkpID0+IHhpICsgKGsxW2ldICsgMiprMltpXSArIDIqazNbaV0gKyBrNFtpXSkvNiApO1xufVxuXG52YXJzKHsgcnVuZ2Vfa3V0dGFfaW50ZWdyYXRvciB9KTsiLCJvdXRwdXQiOltdLCJmb3JtYXR0aW5nX29wdGlvbnMiOnsiYWxpZ24iOiJsZWZ0IiwiaW5kZW50IjoiMGVtIn19LHsiaWQiOiJpZC00MzU5MGQ0Mi1jMTFiLTRjNjAtYjYzMS0yYWM2NmJmMDRkMGQiLCJpbnB1dCI6Ii8vXG5jb25zdCBnbyA9IHNldHVwLmJpbmQodGhpcywgb3V0cHV0X2NvbnRleHQpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vXG4vLyBFcXVhdGlvbkRlZiA9IENvbmZpZyArIHtcbi8vICAgICB0aXRsZT86IHN0cmluZyxcbi8vICAgICBmOiBGdW5jdGlvbixcbi8vICAgICBpdGVyPzogaXRlcmFibGU8Q29uZmlnPnxnZW5lcmF0b3I8Q29uZmlnPihkZWY6IEVxdWF0aW9uRGVmKSxcbi8vICAgICBpdGVyX2RlbGF5PzogbnVtYmVyLFxuLy8gfVxuLy9cbi8vIENvbmZpZyA9IHtcbi8vICAgICBpbnRlZ3JhdG9yPzogKGR0OiBudW1iZXIsIGY6IEZ1bmN0aW9uLCB4OiBudW1iZXJbXSwgcGFyYW1zOiBhbnkpID0+IG51bWJlcltdLFxuLy8gICAgIGR0PzogbnVtYmVyLFxuLy8gICAgIHgwPzogbnVtYmVyW10sXG4vLyAgICAgcGFyYW1zPzogYW55LFxuLy8gICAgIHNraXA/OiAgaW50ZWdlcixcbi8vICAgICBzdGVwcz86IGludGVnZXIsXG4vLyAgICAgcG9pbnRfY2xvdWQ/OiBQb2ludENsb3VkLFxuLy8gfVxuLy9cbi8vIFBvaW50Q2xvdWQgPSB7XG4vLyAgICAgbjogaW50ZWdlcixcbi8vICAgICBjOiBudW1iZXJbXTtcbi8vICAgICByOiBudW1iZXIsXG4vLyAgICAgZHQ/OiBudW1iZXIsXG4vLyAgICAgc3RlcHM/OiBpbnRlZ2VyLFxuLy8gfVxuLy9cbi8vIEZ1bmN0aW9uID0gKHg6IG51bWJlcltdLCBwYXJhbXM/OiBhbnkpID0+IG51bWJlcltdXG4vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuLy8gRGVmaW5pdGlvbnMgZm9yIHNvbWUgY2hhb3RpYyBhdHRyYWN0b3JzIHByb3ZpZGVkIGJ5IERyLiBKYW1lcyBQLiBDcnV0Y2hmaWVsZFxuLy8gKG9uZSBvZiB0aGUgcGlvbmVlcnMgb2YgQ2hhb3MgVGhlb3J5KS5cbi8vXG4vLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBjaGFvdGljIGF0dHJhY3RvcnMgc2VlIExlY3R1cmUgMyBvbiB0aGUgUm9hZG1hcCBwYWdlIGF0IHRoZSBjb3Vyc2U6XG4vL1xuLy8gICAgICAgICAgICAgICAgIGh0dHA6Ly9jc2MudWNkYXZpcy5lZHUvfmNoYW9zL2NvdXJzZXMvcG9jaS9cblxuY29uc3QgaW50ZWdyYXRvciA9IHJ1bmdlX2t1dHRhX2ludGVncmF0b3I7XG5cbmNvbnN0IGxvcmVuel9kZWYgPSB7XG4gICAgdGl0bGU6ICdMb3JlbnogQXR0cmFjdG9yJyxcbiAgICBpbnRlZ3JhdG9yLFxuICAgIGR0OiAwLjAwNSxcbiAgICB4MDogWzMsIDMsIDFdLFxuICAgIGY6ICAoIChzaWdtYT0xMCwgcj0yOCwgYj04LzMpID0+XG4gICAgICAgICAgKFt4LCB5LCB6XSkgPT4gWyAgLy8gdGhpcyBpcyBmLCBhbmQgaXQgdGFrZXMgMSBhcmd1bWVudCB3aGljaCBpcyBkZWNvbXBvc2VkIGludG8gW3gsIHksIHpdXG4gICAgICAgICAgICAgIHNpZ21hKih5IC0geCksXG4gICAgICAgICAgICAgIHIqeCAtIHkgLSB4KnosXG4gICAgICAgICAgICAgIHgqeSAtIGIqeixcbiAgICAgICAgICBdXG4gICAgICAgICkoKVxufTtcblxuY29uc3Qgb3dsX2RlZiA9IHtcbiAgICB0aXRsZTogJ093bCBBdHRyYWN0b3InLFxuICAgIGludGVncmF0b3IsXG4gICAgZHQ6IDAuMDA1LFxuICAgIHgwOiBbMywgMywgMV0sXG4gICAgZjogICggKGE9MTAsIGI9MTAsIGM9MTMpID0+XG4gICAgICAgICAgKFt4LCB5LCB6XSkgPT4gW1xuICAgICAgICAgICAgICAtYSooeCArIHkpLFxuICAgICAgICAgICAgICAteSAtIGIqeCp6LFxuICAgICAgICAgICAgICAxMCp4KnkgKyBjLFxuICAgICAgICAgIF1cbiAgICAgICAgKSgpXG59O1xuXG5jb25zdCByb3NzbGVyX2RlZiA9IHtcbiAgICB0aXRsZTogJ1L2c3NsZXIgQXR0cmFjdG9yJyxcbiAgICBpbnRlZ3JhdG9yLFxuICAgIGR0OiAwLjAwOCxcbiAgICB4MDogWzEwLCAxMCwgMV0sXG4gICAgZjogICggKGE9MC4yLCBiPTAuMiwgYz01LjcpID0+XG4gICAgICAgICAoW3gsIHksIHpdKSA9PiBbXG4gICAgICAgICAgICAgLXkgLSB6LFxuICAgICAgICAgICAgIHggKyBhKnksXG4gICAgICAgICAgICAgYiArIHoqKHggLSBjKSxcbiAgICAgICAgIF1cbiAgICAgICAgKSgpXG59O1xuXG5jb25zdCByaWtpdGFrZTBfZGVmID0geyAgLy8gc2VlOiBodHRwczovL3d3dy5uY2JpLm5sbS5uaWguZ292L3BtYy9hcnRpY2xlcy9QTUM3NTE3MjEwL1xuICAgIHRpdGxlOiAnUmlraXRha2UgQXR0cmFjdG9yICggZnJvbSBodHRwczovL3d3dy5uY2JpLm5sbS5uaWguZ292L3BtYy9hcnRpY2xlcy9QTUM3NTE3MjEwLyApJyxcbiAgICBpbnRlZ3JhdG9yLFxuICAgIGR0OiAwLjAxLFxuICAgIHgwOiBbMywgMSwgNl0sXG4gICAgZjogICggKGFscGhhPTUsIGJldGE9MikgPT5cbiAgICAgICAgICAoW3gsIHksIHpdKSA9PiBbXG4gICAgICAgICAgICAgIC1iZXRhKnggKyB5KnosXG4gICAgICAgICAgICAgIC1iZXRhKnkgLSBhbHBoYSp4ICsgeCp6LFxuICAgICAgICAgICAgICAxIC0geCp5LFxuICAgICAgICAgIF1cbiAgICAgICAgKSgpXG59O1xuXG5jb25zdCByaWtpdGFrZV9kZWYgPSB7XG4gICAgdGl0bGU6ICdSaWtpdGFrZSBBdHRyYWN0b3InLFxuICAgIGludGVncmF0b3IsXG4gICAgZHQ6IDAuMDA5LFxuICAgIHgwOiBbMC4yNjgsIDIsIDBdLFxuICAgIGY6ICAoIChhPTEsIGI9My43NSkgPT5cbiAgICAgICAgICAoW3gsIHksIHpdKSA9PiBbXG4gICAgICAgICAgICAgIC1hKnggKyB6KnksXG4gICAgICAgICAgICAgIC1hKnkgLSAoeiAtIGIpKngsXG4gICAgICAgICAgICAgIDEgLSB4KnksXG4gICAgICAgICAgXVxuICAgICAgICApKClcbn07XG5cbmNvbnN0IGh5cGVyY2hhb3NfZGVmID0ge1xuICAgIHRpdGxlOiAnSHlwZXJjaGFvcyBBdHRyYWN0b3InLFxuICAgIGludGVncmF0b3IsXG4gICAgZHQ6IDAuMDA1LFxuICAgIHgwOiBbLTIwLCAxNSwgMCwgMzVdLFxuICAgIGY6ICAoIChhPTAuMjUsIGI9LTAuNSwgYz0yLjIsIGQ9MC4wNSkgPT5cbiAgICAgICAgICAoW3gsIHksIHosIHddKSA9PiBbXG4gICAgICAgICAgICAgIC15IC0geixcbiAgICAgICAgICAgICAgeCArIGEqeSArIHcsXG4gICAgICAgICAgICAgIGMgKyB4KnosXG4gICAgICAgICAgICAgIGIqeiArIGQqdyxcbiAgICAgICAgICBdXG4gICAgICAgICkoKVxufTtcblxuY29uc3QgcG9pbnRfY2xvdWRfZGVmID0ge1xuICAgIHRpdGxlOiAnTG9yZW56IEF0dHJhY3RvciBXaXRoIFBvaW50IENsb3VkJyxcbiAgICBpbnRlZ3JhdG9yLFxuICAgIGR0OiAwLjAwNSxcbiAgICB4MDogWzMsIDMsIDFdLFxuICAgIHBhcmFtczogeyBzaWdtYTogMTAsIHI6IDI4LCBiOiA4LzMgfSxcbiAgICBmOiAgKFt4LCB5LCB6XSwge3NpZ21hLCByLCBifSkgPT4gW1xuICAgICAgICAgICAgIHNpZ21hKih5IC0geCksXG4gICAgICAgICAgICAgcip4IC0geSAtIHgqeixcbiAgICAgICAgICAgICB4KnkgLSBiKnosXG4gICAgICAgIF0sXG4gICAgc2tpcDogIDEwMDAsXG4gICAgc3RlcHM6IDEwMDAwLFxuICAgIHBvaW50X2Nsb3VkOiB7XG4gICAgICAgIG46IDEwMDAwLFxuICAgICAgICBjOiBbMSwgMSwgMV0sXG4gICAgICAgIHI6IDAuMDUsXG4gICAgICAgIGR0OiAwLjA1LFxuICAgIH1cbn07XG5cbi8vIHNldCB0aGUgZXF1YXRpb24gZGVmaW5pdGlvbiB0byBwbG90XG5cbi8vIGdvKGxvcmVuel9kZWYpO1xuLy8gZ28ob3dsX2RlZik7XG4vLyBnbyhyb3NzbGVyX2RlZik7XG4vLyBnbyhyaWtpdGFrZTBfZGVmKTtcbi8vIGdvKHJpa2l0YWtlX2RlZik7XG4vLyBnbyhoeXBlcmNoYW9zX2RlZik7XG5cbmdvKHBvaW50X2Nsb3VkX2RlZik7XG4iLCJvdXRwdXQiOltdLCJmb3JtYXR0aW5nX29wdGlvbnMiOnsiYWxpZ24iOiJsZWZ0IiwiaW5kZW50IjoiMGVtIn19XX0=
</div>
</body>
</html>
